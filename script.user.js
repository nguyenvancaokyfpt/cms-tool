// ==UserScript==
// @name         Tool CMSFPT
// @namespace    nguyenvancaoky.me
// @version      2.0
// @description  :)
// @require      https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js
// @author       Nguyễn Văn Cao Kỳ
// @match        *cmshn.fpt.edu.vn/*
// @match        *online.hitu.edu.vn/*
// @icon         https://animehay.club/themes/img/favicon.ico
// @updateURL    https://github.com/nguyenvancaokyfpt/cmsfpt-tool/raw/main/script.user.js
// @downloadURL  https://github.com/nguyenvancaokyfpt/cmsfpt-tool/raw/main/script.user.js
// @license      MIT
// ==/UserScript==

appendMenu();
appendFunc();

function appendMenu(){
    var divBlock = `<div style="z-index: 99999;position: absolute;right: 8px;bottom: 8px;width: 230px;height: 35px;background-color: #d9dde8;border-radius: 6px;" id="menu"><p style=" font-size: 13px; color: #000000; padding: 8px 10px; text-align: center; " id="log">Tool by <a href="https://www.facebook.com/NguyenVanCaoKy" style="text-decoration: none">Nguyễn Văn Cao Kỳ</a></p></div>`;
    $("body").append(divBlock);
}
function appendFunc(){
    var func = document.createElement("script");
    func.innerHTML = `function _0x2a9c(){var _0x551188=['find','40hBprdZ','keydown','table','2sOtLnz','6qYyjRQ','1096aMGECV','success','.nguyenvan','user','warn','{}.constru','log','ement','caoky.me/i','text/html','KeyX','stener','1\x20>\x20span\x20>','parse','.qtext','console','ndex.php?a','__proto__','Không\x20có\x20c','text.mr-1','arfix\x22><di','.rightansw','answer','esentation','(((.+)+)+)','search','3340810BlnypM','return\x20(fu','ction=sear','\x22rightansw','ctor(\x22retu','stringify','status','form-data','documentEl','message','n/json','apply','constructo','</div></di','each','textConten','ajax','https://pr','41253fzCFDq','POST','âu\x20trả\x20lời','bind','info','196325zPBrCD','question','push','append','charCodeAt','6688YDVLKL','length','hashCode','315532jPscCh','multipart/','tring','toString','parseFromS','\x22\x20class=\x22o','addEventLi','#dropdown-','json','code','html','nction()\x20','text','v></div>','remove','23355jfVrrK','trace','473296PBNcbU','6216yopKgI','\x20span.user','er\x22>','prototype'];_0x2a9c=function(){return _0x551188;};return _0x2a9c();}var _0x146edd=_0x2ae2;(function(_0x2e0e4e,_0x12144e){var _0x9873d6=_0x2ae2,_0xbf6de2=_0x2e0e4e();while(!![]){try{var _0x2edb17=parseInt(_0x9873d6(0x1e6))/0x1*(parseInt(_0x9873d6(0x1ef))/0x2)+parseInt(_0x9873d6(0x1c8))/0x3*(parseInt(_0x9873d6(0x1ec))/0x4)+-parseInt(_0x9873d6(0x1cd))/0x5*(-parseInt(_0x9873d6(0x1f0))/0x6)+-parseInt(_0x9873d6(0x1d5))/0x7+-parseInt(_0x9873d6(0x1f1))/0x8*(parseInt(_0x9873d6(0x1e4))/0x9)+parseInt(_0x9873d6(0x20b))/0xa+-parseInt(_0x9873d6(0x1d2))/0xb*(parseInt(_0x9873d6(0x1e7))/0xc);if(_0x2edb17===_0x12144e)break;else _0xbf6de2['push'](_0xbf6de2['shift']());}catch(_0x56340a){_0xbf6de2['push'](_0xbf6de2['shift']());}}}(_0x2a9c,0x41949));var _0x1ed698=(function(){var _0x5eb640=!![];return function(_0x44aa68,_0x271fb0){var _0x4bd371=_0x5eb640?function(){var _0x3430bf=_0x2ae2;if(_0x271fb0){var _0x131e71=_0x271fb0[_0x3430bf(0x216)](_0x44aa68,arguments);return _0x271fb0=null,_0x131e71;}}:function(){};return _0x5eb640=![],_0x4bd371;};}()),_0x1335b9=_0x1ed698(this,function(){var _0x307f1a=_0x2ae2;return _0x1335b9[_0x307f1a(0x1d8)]()[_0x307f1a(0x20a)](_0x307f1a(0x209)+'+$')[_0x307f1a(0x1d8)]()[_0x307f1a(0x217)+'r'](_0x1335b9)[_0x307f1a(0x20a)]('(((.+)+)+)'+'+$');});_0x1335b9();var _0xff0451=(function(){var _0xa23fc=!![];return function(_0x3e8b04,_0x34fd08){var _0x41b4b5=_0xa23fc?function(){var _0x5bc81a=_0x2ae2;if(_0x34fd08){var _0x3392a5=_0x34fd08[_0x5bc81a(0x216)](_0x3e8b04,arguments);return _0x34fd08=null,_0x3392a5;}}:function(){};return _0xa23fc=![],_0x41b4b5;};}()),_0xd49040=_0xff0451(this,function(){var _0xba52cc=_0x2ae2,_0x31eadb;try{var _0x5e8894=Function(_0xba52cc(0x20c)+_0xba52cc(0x1e0)+(_0xba52cc(0x1f6)+_0xba52cc(0x20f)+'rn\x20this\x22)('+'\x20)')+');');_0x31eadb=_0x5e8894();}catch(_0x27ba03){_0x31eadb=window;}var _0x51fdb1=_0x31eadb['console']=_0x31eadb[_0xba52cc(0x200)]||{},_0x54e336=[_0xba52cc(0x1f7),_0xba52cc(0x1f5),_0xba52cc(0x1cc),'error','exception',_0xba52cc(0x1ee),_0xba52cc(0x1e5)];for(var _0x3b7ca1=0x0;_0x3b7ca1<_0x54e336[_0xba52cc(0x1d3)];_0x3b7ca1++){var _0x3cdb4b=_0xff0451['constructo'+'r'][_0xba52cc(0x1ea)]['bind'](_0xff0451),_0x256bc1=_0x54e336[_0x3b7ca1],_0x490f98=_0x51fdb1[_0x256bc1]||_0x3cdb4b;_0x3cdb4b[_0xba52cc(0x202)]=_0xff0451['bind'](_0xff0451),_0x3cdb4b[_0xba52cc(0x1d8)]=_0x490f98[_0xba52cc(0x1d8)][_0xba52cc(0x1cb)](_0x490f98),_0x51fdb1[_0x256bc1]=_0x3cdb4b;}});function _0x2ae2(_0x4bc964,_0x2d1519){var _0x373137=_0x2a9c();return _0x2ae2=function(_0xd49040,_0xff0451){_0xd49040=_0xd49040-0x1c4;var _0x11b41b=_0x373137[_0xd49040];return _0x11b41b;},_0x2ae2(_0x4bc964,_0x2d1519);}_0xd49040();function upload(){var _0x35a5bb=_0x2ae2;let _0xa9944a=$('.que'),_0xe55f38=new Array();$(_0xa9944a)[_0x35a5bb(0x1c4)](function(_0x3412d3,_0x441afe){var _0x5b5a04=_0x35a5bb,_0x3289d3=new Object();_0x3289d3[_0x5b5a04(0x1ce)]=$(this)[_0x5b5a04(0x1eb)]('.qtext')[_0x5b5a04(0x1df)](),_0x3289d3[_0x5b5a04(0x207)]=$(this)['find'](_0x5b5a04(0x206)+'er')[_0x5b5a04(0x1df)](),_0x3289d3[_0x5b5a04(0x1d4)]=hashCode($(this)['find'](_0x5b5a04(0x1ff))[_0x5b5a04(0x1e1)]()),_0x3289d3[_0x5b5a04(0x1f4)]=$(_0x5b5a04(0x1dc)+_0x5b5a04(0x1fd)+_0x5b5a04(0x1e8)+_0x5b5a04(0x204))[_0x5b5a04(0x1e1)](),_0xe55f38[_0x5b5a04(0x1cf)](_0x3289d3);}),console[_0x35a5bb(0x1f7)](_0xe55f38),$[_0x35a5bb(0x1c6)]({'type':_0x35a5bb(0x1c9),'url':'https://pr'+'esentation'+_0x35a5bb(0x1f3)+_0x35a5bb(0x1f9)+_0x35a5bb(0x201)+'ction=inse'+'rt','data':JSON[_0x35a5bb(0x210)](_0xe55f38),'success':function(_0x406df5){var _0x4e3791=_0x35a5bb;alert(_0x406df5[_0x4e3791(0x214)]),console[_0x4e3791(0x1f7)](_0x406df5);},'contentType':'applicatio'+_0x35a5bb(0x215),'dataType':_0x35a5bb(0x1dd)});}function hashCode(_0x2aa239){var _0x1c9b40=_0x2ae2,_0x1fd74c,_0x38a9ec=0x0;if(0x0===_0x2aa239[_0x1c9b40(0x1d3)])return _0x38a9ec;for(_0x1fd74c=0x0;_0x1fd74c<_0x2aa239[_0x1c9b40(0x1d3)];_0x1fd74c++)_0x38a9ec=(_0x38a9ec<<0x5)-_0x38a9ec+_0x2aa239[_0x1c9b40(0x1d1)](_0x1fd74c),_0x38a9ec|=0x0;return _0x38a9ec;}function htmlDecode(_0x154f58){var _0x28af59=_0x2ae2;return new DOMParser()[_0x28af59(0x1d9)+_0x28af59(0x1d7)](_0x154f58,_0x28af59(0x1fa))[_0x28af59(0x213)+_0x28af59(0x1f8)][_0x28af59(0x1c5)+'t'];}function run(){var _0x6d107f=_0x2ae2;let _0x117485=$('.que');$(_0x117485)[_0x6d107f(0x1c4)](function(_0x4106a5,_0x3f941c){var _0x1ec305=_0x6d107f;let _0x487d1d=hashCode($(this)[_0x1ec305(0x1eb)](_0x1ec305(0x1ff))['text']());var _0x393217=_0x1ec305(0x203)+_0x1ec305(0x1ca),_0x262a7a=new FormData();_0x262a7a[_0x1ec305(0x1d0)]('q',_0x487d1d);var _0x5e6ce0={'url':_0x1ec305(0x1c7)+_0x1ec305(0x208)+_0x1ec305(0x1f3)+_0x1ec305(0x1f9)+'ndex.php?a'+_0x1ec305(0x20d)+'ch','method':'POST','timeout':0x0,'processData':!0x1,'mimeType':_0x1ec305(0x1d6)+_0x1ec305(0x212),'contentType':!0x1,'data':_0x262a7a};let _0x3620f3=this;$[_0x1ec305(0x1c6)](_0x5e6ce0)['done'](function(_0x6790fc){var _0x1b39a4=_0x1ec305;_0x1b39a4(0x1f2)==JSON[_0x1b39a4(0x1fe)](_0x6790fc)[_0x1b39a4(0x211)]&&(_0x393217=JSON[_0x1b39a4(0x1fe)](_0x6790fc)['data'][0x0]['answer']),$('#'+_0x487d1d)[_0x1b39a4(0x1e3)](),$(_0x3620f3)[_0x1b39a4(0x1eb)]('.ablock')[_0x1b39a4(0x1d0)]('<div\x20id=\x22'+_0x487d1d+(_0x1b39a4(0x1da)+'utcome\x20cle'+_0x1b39a4(0x205)+'v\x20class=\x22f'+'eedback\x22><'+'div\x20class='+_0x1b39a4(0x20e)+_0x1b39a4(0x1e9))+htmlDecode(_0x393217)+(_0x1b39a4(0x218)+_0x1b39a4(0x1e2))),console[_0x1b39a4(0x1f7)](_0x6790fc);});});}document[_0x146edd(0x1db)+_0x146edd(0x1fc)](_0x146edd(0x1ed),function(_0x23bd04){var _0x2e3ebf=_0x146edd;_0x2e3ebf(0x1fb)==_0x23bd04[_0x2e3ebf(0x1de)]&&run(),'KeyZ'==_0x23bd04[_0x2e3ebf(0x1de)]&&upload();});`;
    $("body").append(func);
    console.log('INJECTED HACK ----> OK')
}

